{"ast":null,"code":"import { signal } from '@angular/core';\nimport { RouterOutlet } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./crud\";\nexport let App = /*#__PURE__*/(() => {\n  class App {\n    crudService;\n    title = signal('Formula One Blog', ...(ngDevMode ? [{\n      debugName: \"title\"\n    }] : []));\n    posts = signal([], ...(ngDevMode ? [{\n      debugName: \"posts\"\n    }] : []));\n    loading = signal(false, ...(ngDevMode ? [{\n      debugName: \"loading\"\n    }] : []));\n    editingPost = signal(null, ...(ngDevMode ? [{\n      debugName: \"editingPost\"\n    }] : []));\n    currentPost = {\n      name: '',\n      comment: ''\n    };\n    constructor(crudService) {\n      this.crudService = crudService;\n    }\n    ngOnInit() {\n      this.loadPosts();\n    }\n    loadPosts() {\n      this.loading.set(true);\n      this.crudService.getAllPosts().subscribe({\n        next: posts => {\n          this.posts.set(posts);\n          this.loading.set(false);\n        },\n        error: error => {\n          console.error('Error loading posts:', error);\n          this.loading.set(false);\n          alert('Error loading posts. Please check if the backend is running.');\n        }\n      });\n    }\n    onSubmit() {\n      if (!this.currentPost.name || !this.currentPost.comment) {\n        return;\n      }\n      if (this.editingPost()) {\n        // Update existing post\n        this.crudService.updatePost(this.editingPost().id, this.currentPost).subscribe({\n          next: updatedPost => {\n            this.loadPosts(); // Reload all posts\n            this.resetForm();\n            alert('Post updated successfully!');\n          },\n          error: error => {\n            console.error('Error updating post:', error);\n            alert('Error updating post. Please try again.');\n          }\n        });\n      } else {\n        // Create new post\n        this.crudService.createPost(this.currentPost).subscribe({\n          next: newPost => {\n            this.loadPosts(); // Reload all posts\n            this.resetForm();\n            alert('Post created successfully!');\n          },\n          error: error => {\n            console.error('Error creating post:', error);\n            alert('Error creating post. Please try again.');\n          }\n        });\n      }\n    }\n    startEdit(post) {\n      this.editingPost.set(post);\n      this.currentPost = {\n        ...post\n      };\n    }\n    cancelEdit() {\n      this.editingPost.set(null);\n      this.resetForm();\n    }\n    deletePost(id) {\n      // Note: Backend doesn't have delete endpoint, so this is disabled\n      alert('Delete functionality not implemented in backend yet.');\n    }\n    resetForm() {\n      this.currentPost = {\n        name: '',\n        comment: ''\n      };\n      this.editingPost.set(null);\n    }\n    static ɵfac = function App_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || App)(i0.ɵɵdirectiveInject(i1.CrudService));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: App,\n      selectors: [[\"app-root\"]],\n      decls: 1,\n      vars: 0,\n      template: function App_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelement(0, \"router-outlet\");\n        }\n      },\n      dependencies: [RouterOutlet, CommonModule, FormsModule],\n      encapsulation: 2\n    });\n  }\n  return App;\n})();","map":{"version":3,"names":["signal","RouterOutlet","CommonModule","FormsModule","App","crudService","title","ngDevMode","debugName","posts","loading","editingPost","currentPost","name","comment","constructor","ngOnInit","loadPosts","set","getAllPosts","subscribe","next","error","console","alert","onSubmit","updatePost","id","updatedPost","resetForm","createPost","newPost","startEdit","post","cancelEdit","deletePost","i0","ɵɵdirectiveInject","i1","CrudService","selectors","decls","vars","template","App_Template","rf","ctx","ɵɵelement","encapsulation"],"sources":["/Users/ariez/Downloads/crud/src/app/app.ts"],"sourcesContent":["import { Component, OnInit, signal } from '@angular/core';\nimport { RouterOutlet } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { CrudService, CrudPost } from './crud';\n\n@Component({\n  selector: 'app-root',\n  imports: [RouterOutlet, CommonModule, FormsModule],\n  template: `\n\n\n\n    <router-outlet/>\n  `,\n  styles: [],\n  standalone: true\n})\n\nexport class App implements OnInit {\n  protected readonly title = signal<string>('Formula One Blog');\n\n  posts = signal<CrudPost[]>([]);\n  loading = signal<boolean>(false);\n  editingPost = signal<CrudPost | null>(null);\n\n  currentPost: CrudPost = {\n    name: '',\n    comment: ''\n  };\n\n  constructor(private crudService: CrudService) {}\n\n  ngOnInit() {\n    this.loadPosts();\n  }\n\n  loadPosts() {\n    this.loading.set(true);\n    this.crudService.getAllPosts().subscribe({\n      next: (posts) => {\n        this.posts.set(posts);\n        this.loading.set(false);\n      },\n      error: (error) => {\n        console.error('Error loading posts:', error);\n        this.loading.set(false);\n        alert('Error loading posts. Please check if the backend is running.');\n      }\n    });\n  }\n\n  onSubmit() {\n    if (!this.currentPost.name || !this.currentPost.comment) {\n      return;\n    }\n\n    if (this.editingPost()) {\n      // Update existing post\n      this.crudService.updatePost(this.editingPost()!.id!, this.currentPost).subscribe({\n        next: (updatedPost) => {\n          this.loadPosts(); // Reload all posts\n          this.resetForm();\n          alert('Post updated successfully!');\n        },\n        error: (error) => {\n          console.error('Error updating post:', error);\n          alert('Error updating post. Please try again.');\n        }\n      });\n    } else {\n      // Create new post\n      this.crudService.createPost(this.currentPost).subscribe({\n        next: (newPost) => {\n          this.loadPosts(); // Reload all posts\n          this.resetForm();\n          alert('Post created successfully!');\n        },\n\n        error: (error) => {\n          console.error('Error creating post:', error);\n          alert('Error creating post. Please try again.');\n        }\n      });\n    }\n  }\n\n  startEdit(post: CrudPost) {\n    this.editingPost.set(post);\n    this.currentPost = { ...post };\n  }\n\n  cancelEdit() {\n    this.editingPost.set(null);\n    this.resetForm();\n  }\n\n  deletePost(id: number) {\n    // Note: Backend doesn't have delete endpoint, so this is disabled\n    alert('Delete functionality not implemented in backend yet.');\n  }\n\n  private resetForm() {\n    this.currentPost = {\n      name: '',\n      comment: ''\n    };\n    this.editingPost.set(null);\n  }\n}\n"],"mappings":"AAAA,SAA4BA,MAAM,QAAQ,eAAe;AACzD,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,YAAY,QAAQ,iBAAiB;AAC9C,SAASC,WAAW,QAAQ,gBAAgB;;;AAgB5C,WAAaC,GAAG;EAAV,MAAOA,GAAG;IAYMC,WAAA;IAXDC,KAAK,GAAGN,MAAM,CAAS,kBAAkB,MAAAO,SAAA;MAAAC,SAAA;IAAA,SAAC;IAE7DC,KAAK,GAAGT,MAAM,CAAa,EAAE,MAAAO,SAAA;MAAAC,SAAA;IAAA,SAAC;IAC9BE,OAAO,GAAGV,MAAM,CAAU,KAAK,MAAAO,SAAA;MAAAC,SAAA;IAAA,SAAC;IAChCG,WAAW,GAAGX,MAAM,CAAkB,IAAI,MAAAO,SAAA;MAAAC,SAAA;IAAA,SAAC;IAE3CI,WAAW,GAAa;MACtBC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE;KACV;IAEDC,YAAoBV,WAAwB;MAAxB,KAAAA,WAAW,GAAXA,WAAW;IAAgB;IAE/CW,QAAQA,CAAA;MACN,IAAI,CAACC,SAAS,EAAE;IAClB;IAEAA,SAASA,CAAA;MACP,IAAI,CAACP,OAAO,CAACQ,GAAG,CAAC,IAAI,CAAC;MACtB,IAAI,CAACb,WAAW,CAACc,WAAW,EAAE,CAACC,SAAS,CAAC;QACvCC,IAAI,EAAGZ,KAAK,IAAI;UACd,IAAI,CAACA,KAAK,CAACS,GAAG,CAACT,KAAK,CAAC;UACrB,IAAI,CAACC,OAAO,CAACQ,GAAG,CAAC,KAAK,CAAC;QACzB,CAAC;QACDI,KAAK,EAAGA,KAAK,IAAI;UACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;UAC5C,IAAI,CAACZ,OAAO,CAACQ,GAAG,CAAC,KAAK,CAAC;UACvBM,KAAK,CAAC,8DAA8D,CAAC;QACvE;OACD,CAAC;IACJ;IAEAC,QAAQA,CAAA;MACN,IAAI,CAAC,IAAI,CAACb,WAAW,CAACC,IAAI,IAAI,CAAC,IAAI,CAACD,WAAW,CAACE,OAAO,EAAE;QACvD;MACF;MAEA,IAAI,IAAI,CAACH,WAAW,EAAE,EAAE;QACtB;QACA,IAAI,CAACN,WAAW,CAACqB,UAAU,CAAC,IAAI,CAACf,WAAW,EAAG,CAACgB,EAAG,EAAE,IAAI,CAACf,WAAW,CAAC,CAACQ,SAAS,CAAC;UAC/EC,IAAI,EAAGO,WAAW,IAAI;YACpB,IAAI,CAACX,SAAS,EAAE,CAAC,CAAC;YAClB,IAAI,CAACY,SAAS,EAAE;YAChBL,KAAK,CAAC,4BAA4B,CAAC;UACrC,CAAC;UACDF,KAAK,EAAGA,KAAK,IAAI;YACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;YAC5CE,KAAK,CAAC,wCAAwC,CAAC;UACjD;SACD,CAAC;MACJ,CAAC,MAAM;QACL;QACA,IAAI,CAACnB,WAAW,CAACyB,UAAU,CAAC,IAAI,CAAClB,WAAW,CAAC,CAACQ,SAAS,CAAC;UACtDC,IAAI,EAAGU,OAAO,IAAI;YAChB,IAAI,CAACd,SAAS,EAAE,CAAC,CAAC;YAClB,IAAI,CAACY,SAAS,EAAE;YAChBL,KAAK,CAAC,4BAA4B,CAAC;UACrC,CAAC;UAEDF,KAAK,EAAGA,KAAK,IAAI;YACfC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;YAC5CE,KAAK,CAAC,wCAAwC,CAAC;UACjD;SACD,CAAC;MACJ;IACF;IAEAQ,SAASA,CAACC,IAAc;MACtB,IAAI,CAACtB,WAAW,CAACO,GAAG,CAACe,IAAI,CAAC;MAC1B,IAAI,CAACrB,WAAW,GAAG;QAAE,GAAGqB;MAAI,CAAE;IAChC;IAEAC,UAAUA,CAAA;MACR,IAAI,CAACvB,WAAW,CAACO,GAAG,CAAC,IAAI,CAAC;MAC1B,IAAI,CAACW,SAAS,EAAE;IAClB;IAEAM,UAAUA,CAACR,EAAU;MACnB;MACAH,KAAK,CAAC,sDAAsD,CAAC;IAC/D;IAEQK,SAASA,CAAA;MACf,IAAI,CAACjB,WAAW,GAAG;QACjBC,IAAI,EAAE,EAAE;QACRC,OAAO,EAAE;OACV;MACD,IAAI,CAACH,WAAW,CAACO,GAAG,CAAC,IAAI,CAAC;IAC5B;;uCAzFWd,GAAG,EAAAgC,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,WAAA;IAAA;;YAAHnC,GAAG;MAAAoC,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,QAAA,WAAAC,aAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UANZT,EAAA,CAAAW,SAAA,oBAAgB;;;qBALR9C,YAAY,EAAEC,YAAY,EAAEC,WAAW;MAAA6C,aAAA;IAAA;;SAWtC5C,GAAG;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}